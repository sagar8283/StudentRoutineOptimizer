{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///R:/SHRIRAKSH/SAGARFINAL/StudentRoutineOptimizer/frontend/pages/login.js"],"sourcesContent":["import Head from 'next/head';\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport { API_BASE, HERO_IMAGE_BACKEND } from '../components/api';\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [err, setErr] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [remember, setRemember] = useState(false);\r\n\r\n  async function safeFetchJSON(res) {\r\n    const text = await res.text();\r\n    try { return text ? JSON.parse(text) : {}; } catch (parseErr) {\r\n      throw new Error(`Server returned non-JSON response (status ${res.status}):\\n\\n${text.slice(0,2000)}`);\r\n    }\r\n  }\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    setErr('');\r\n    setLoading(true);\r\n\r\n    if (!email?.trim()) { setErr('Enter email'); setLoading(false); return; }\r\n    if (!password?.trim()) { setErr('Enter password'); setLoading(false); return; }\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/auth/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const body = await safeFetchJSON(res);\r\n      if (!res.ok) throw new Error(body.error || body.message || `Status ${res.status}`);\r\n      router.replace('/');\r\n    } catch (e) {\r\n      console.error('login error', e);\r\n      setErr(e.message || 'Login failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Login — Student Optimizer</title>\r\n      </Head>\r\n\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-800 p-6\">\r\n        <div className=\"w-full max-w-3xl grid grid-cols-1 md:grid-cols-2 gap-8 items-center\">\r\n\r\n          {/* Left: Illustration / Brand */}\r\n          <div className=\"hidden md:flex items-center justify-center p-6 rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 shadow-lg transform hover:scale-[1.01] transition-all\">\r\n            <div className=\"text-center text-white\">\r\n              <img src={HERO_IMAGE_BACKEND} alt=\"logo\" className=\"w-28 h-28 rounded-full object-cover mx-auto mb-4 ring-4 ring-white/20\" />\r\n              <h2 className=\"text-2xl font-bold\">Student Optimizer</h2>\r\n              <p className=\"mt-2 text-sm opacity-90\">Smart scheduling · Study reminders · Personalized tips</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right: Form */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-10\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div>\r\n                <h1 className=\"text-2xl font-semibold\">Welcome back</h1>\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Login to continue to your dashboard</p>\r\n              </div>\r\n\r\n              <div className=\"md:hidden\">\r\n                <img src={HERO_IMAGE_BACKEND} alt=\"logo\" className=\"w-12 h-12 rounded-full object-cover\" />\r\n              </div>\r\n            </div>\r\n\r\n            <form onSubmit={onSubmit} className=\"space-y-4\">\r\n\r\n              <label className=\"block\">\r\n                <span className=\"text-xs font-medium text-gray-600 dark:text-gray-300\">Email</span>\r\n                <div className=\"mt-1 relative\">\r\n                  <svg className=\"w-5 h-5 absolute left-3 top-3 text-gray-400\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"><path d=\"M3 8l7.89 5.26a2 2 0 0 0 2.22 0L21 8\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    placeholder=\"you@school.edu\"\r\n                    className=\"w-full pl-11 pr-3 py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-transparent focus:outline-none focus:ring-2 focus:ring-indigo-400 transition\"\r\n                    aria-label=\"Email\"\r\n                  />\r\n                </div>\r\n              </label>\r\n\r\n              <label className=\"block\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-xs font-medium text-gray-600 dark:text-gray-300\">Password</span>\r\n                  <a className=\"text-xs text-indigo-600 hover:underline\" href=\"#\">Forgot?</a>\r\n                </div>\r\n                <div className=\"mt-1 relative\">\r\n                  <svg className=\"w-5 h-5 absolute left-3 top-3 text-gray-400\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"><rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/><path d=\"M7 11V7a5 5 0 0 1 10 0v4\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    placeholder=\"••••••••\"\r\n                    className=\"w-full pl-11 pr-3 py-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-transparent focus:outline-none focus:ring-2 focus:ring-indigo-400 transition\"\r\n                    aria-label=\"Password\"\r\n                  />\r\n                </div>\r\n              </label>\r\n\r\n              {err && <div className=\"text-sm text-red-500 whitespace-pre-wrap\">{err}</div>}\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"inline-flex items-center gap-2 text-sm\">\r\n                  <input type=\"checkbox\" checked={remember} onChange={() => setRemember(!remember)} className=\"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\" />\r\n                  <span className=\"text-gray-600 dark:text-gray-300\">Remember me</span>\r\n                </label>\r\n\r\n                <div className=\"text-sm text-gray-500\">New here? <button type=\"button\" onClick={() => router.push('/register')} className=\"text-indigo-600 hover:underline\">Create account</button></div>\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"w-full inline-flex items-center justify-center gap-3 px-4 py-3 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium shadow-md hover:shadow-lg focus:outline-none disabled:opacity-60 transition\"\r\n              >\r\n                {loading ? (\r\n                  <svg className=\"w-5 h-5 animate-spin\" viewBox=\"0 0 24 24\"><circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" strokeOpacity=\"0.25\" fill=\"none\"/><path d=\"M22 12a10 10 0 0 0-10-10\" stroke=\"currentColor\" strokeWidth=\"4\" strokeLinecap=\"round\" fill=\"none\"/></svg>\r\n                ) : null}\r\n                <span>{loading ? 'Logging in...' : 'Login'}</span>\r\n              </button>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"flex-1 h-px bg-gray-200 dark:bg-gray-700\" />\r\n                <div className=\"text-xs text-gray-400\">or continue with</div>\r\n                <div className=\"flex-1 h-px bg-gray-200 dark:bg-gray-700\" />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <button type=\"button\" className=\"py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-sm flex items-center justify-center gap-2\">Google</button>\r\n                <button type=\"button\" className=\"py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-sm flex items-center justify-center gap-2\">GitHub</button>\r\n              </div>\r\n\r\n              <p className=\"text-xs text-gray-400 text-center\">By continuing you agree to our <a href=\"#\" className=\"underline\">Terms</a> and <a href=\"#\" className=\"underline\">Privacy</a>.</p>\r\n\r\n            </form>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}